<!-- This is the project to shown the Bar Chart of the data. To create this projec need d3 library otherwise connect with Internet -->
<!DOCTYPE html>
<meta charset="utf-8">
<head>

<script src="https://d3js.org/d3.v4.min.js"></script>
		<script src="d3.js"></script>
		<script src="d3/d3.min.js"></script>
		

<style> /* set the CSS */

.bar { fill: steelblue; }
div{background-color: lightblue;}
h1{text-align:center;}
select{position:absolute;
       right:150px;
	   top:80px;}
button{position:absolute;
	   right:63px;
	   top:80px;}
label{position:absolute;
       right:240px;
	   top:110px;}

</style>
</head>
 <body>  	
    <div ><h1 >Bar Chart View<h1 id="head"></h1></h1></div>
	
	<select id="sel" name="sel"  >
	 <option>None</option>
     <option value="1" >Road-accsident</option>
     <option value="2" >state wise project</option>
	 <option value="3">Sort Bar Chart</option>
    </select>
	
	<button onclick="myfun();">Select Data</button>
 
  <script type="text/javascript">
	
	var margin={top: 100, right: 20, bottom: 130, left: 240};

	var w = 960 - margin.left - margin.right;
    var h = 500 - margin.top - margin.bottom;
		
	var canvas=d3.select("body").append("svg")
						.attr("width",w + margin.left + margin.right)
						.attr("height",h + margin.top + margin.bottom)
						.append("g")
						.attr("transform", "translate("+ margin.left +","+ margin.top +")");
					
	var yScale=d3.scaleLinear().range([0,h]);
	
	var yAxis=d3.scaleLinear().range([h,0]);
	
	var xScale=d3.scaleBand().range([0, w]).padding(0.1);
	var var_data = "road-accsident.csv";
	 var h_word ="",col = "";
	 function myfun()
	 {
		var z = document.getElementById("sel").selectedIndex;
		if(z==1){
		document.getElementById("head").innerHTML = "Road Accsident in each state in 2012-13"
		var_data = "road-accsident.csv";
		canvas.selectAll("*").remove();
		h_word = "Accsident";
		col = "red";
		drawChart();}
		if(z==2)
		{
		   document.getElementById("head").innerHTML = "On Going Project in each state in 2015-16"
        	var_data = "state_wise_project.csv";
			h_word = "Project";
			col = "darkgreen";
			canvas.selectAll("*").remove();
			drawChart();
			}
		if(z==3)
		{
			canvas.selectAll("*").remove();
			sortfun();
		}
	 }
	function drawChart(){
	d3.csv(var_data, function(error,data)
	{	
		if(error){alert("Error: data not loaded!");}
		
		
		var max=d3.max(data, function(d){return d.value;});
		 
		yScale.domain([0,max]);
		
		yAxis.domain([0,max]);
		
		xScale.domain(data.map(function(d) { return d.States; }));
		
		canvas.selectAll(".bar")
				.data(data)
				.enter()
					.append("rect")
					.transition()
					.delay(1000)
					.duration(3000)
					.attr("height", function (d) 
									{
										return yScale(d.value);
									})
					.attr("width", xScale.bandwidth())
					.attr("x", function (d) 
									{ 
										return xScale(d.States);
									})
					.attr("y", function (d)
									{
										return (h-yScale(d.value)	);
									})
					.attr("fill", "steelblue");
					
		
		canvas.selectAll("rect").data(data).append("title")
						.text(function(d,i)
										{
											return ("No. of "+ h_word+": " + d.value );
										});
												
		canvas.selectAll("rect")
		.data(data)
		.on("mouseover", function(d) {
		  d3.select(this)
		    .attr("fill",col);
		});
								
 		canvas.append("g")
				.attr("transform","translate(0," + h + ")")
				.call(d3.axisBottom(xScale))
				.selectAll("text")  
				.transition()
				.duration(3000)
				.style("text-anchor", "end")
				.attr("dx", "-.8em")
				.attr("dy", ".15em")
				.attr("transform", "rotate(-65)");
		
		canvas.append("g")
				.transition()
				.duration(3000)
				.call(d3.axisLeft(yAxis));
				
		canvas.append("g")
		   .attr("class","y axis")
		   .call(yAxis)
           .append("text")
           .attr("transform", "rotate(-90)")
           .attr("y", -50)
           .attr("dy", ".11em")
           .style("text-anchor", "end")
           .text("No. Of "+h_word);
	
	
	 
  });}
  function sortfun()
  {
	d3.csv(var_data, function(error,data)
	{	
		if(error){alert("Error:data not loaded!");}
		
		  data.forEach(function(d){
			d.States = d.States;
			d.value = d.value;
			
		});
		data.sort(function(a,b){
		  return b.value - a.value;
		  });
		var max=d3.max(data, function(d){return d.value;});
		 
		yScale.domain([0,max]);
		
		yAxis.domain([0,max]);
		
		xScale.domain(data.map(function(d) { return d.States; }));
		
		canvas.selectAll(".bar")
				.data(data)
				.enter()
					.append("rect")
					.transition()
					.delay(1000)
					.duration(3000)
					.attr("height", function (d) 
									{
										return yScale(d.value);
									})
					.attr("width", xScale.bandwidth())
					.attr("x", function (d) 
									{ 
										return xScale(d.States);
									})
					.attr("y", function (d)
									{
										return (h-yScale(d.value)	);
									})
					.attr("fill", "steelblue");
					
		
		canvas.selectAll("rect").data(data).append("title")
						.text(function(d,i)
										{
											return ("No. of "+ h_word+": " + d.value );
										});
												
		canvas.selectAll("rect")
		.data(data)
		.on("mouseover", function(d) {
		  d3.select(this)
		    .attr("fill",col);
		});
		 				
 		canvas.append("g")
				.attr("transform","translate(0," + h + ")")
				.call(d3.axisBottom(xScale))
				.selectAll("text")  
				.transition()
				.duration(3000)
				.style("text-anchor", "end")
				.attr("dx", "-.8em")
				.attr("dy", ".15em")
				.attr("transform", "rotate(-65)");
		
		canvas.append("g")
				.transition()
				.duration(3000)
				.call(d3.axisLeft(yAxis));
				
		canvas.append("g")
		   .attr("class","y axis")
		   .call(yAxis)
           .append("text")
           .attr("transform", "rotate(-90)")
           .attr("y", -50)
           .attr("dy", ".11em")
           .style("text-anchor", "end")
           .text("No. Of "+h_word);
	
	
	 
  });
 }
	</script>
 </body>

</html>